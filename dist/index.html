<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" type="image/png" sizes="32x32" href="https://raw.githubusercontent.com/ethereum/ethereum-org/master/dist/favicon.ico">

    <title>Ethers.js + Hardhat + Vue.js Demo</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Flex:opsz,wght@8..144,300;8..144,500&display=swap" rel="stylesheet">
</head>

<body>
    <div id="app" v-cloak>
        <div v-if="!isFatalError" class="row-container">
            <div class="box cyan">
                <h2>Network</h2>
                <img src="img/icon-supervisor.svg" alt="">
                <p>
                    <div>Connected to {{ networkName }}, ID {{ networkId }}</div>
                    <div>Current block {{ blockNumber }}</div>
                </p>
            </div>
        </div>

        <div v-if="!isFatalError" class="row-container">
            <div class="box red box-middle">
                <h2>Account</h2>
                <img src="img/icon-team-builder.svg" alt="">
                <p>
                    <div>MetaMask account {{ accountAddress }}</div>
                    <div>Balance {{ accountBalanceEth }} ETH</div>
                    <div>Balance in contract {{ accountBalanceInContractEth }} ETH</div>
                </p>
                <p>
                    <div><input v-model="amountEth" :disabled="isSending" placeholder="ETH amount"></label></div>
                    <button @click="send" :disabled="isSending">Send to contract</button>
                </p>
            </div>

            <div class="box blue box-middle">
                <h2>Contract</h2>
                <img src="img/icon-calculator.svg" alt="">
                <p>
                    <div>Address {{ contractAddress }}</div>
                    <div>Balance {{ contractBalanceEth }} ETH</div>
                    <div>Received {{ paymentsCount }} payments</div>
                    <div>Completed {{ refundsCount }} refunds</div>
                </p>
                <p>
                    <button @click="refund" :disabled="isRefunding || !Number(accountBalanceInContractWei)">Request refund</button>
                </p>
            </div>
        </div>

        <div class="row-container">
            <div class="box orange box-bottom">
                <h2 v-if="!isFatalError">Transaction Status</h2>
                <h2 v-else>Fatal Error</h2>
                <img src="img/icon-karma.svg" alt="">
                <p>
                <div v-if="transactionHash">
                    {{ transactionType }} initiated<br />
                    Transaction hash {{ transactionHash }}<br />
                    Awaiting block confirmation...
                </div>
                <div v-if="transactionBlock">Confirmed and mined in block {{ transactionBlock }}</span></div>
                <div v-if="errorMessage">{{ errorMessage }}</div>
                </p>
            </div>
        </div>
    </div>
</body>

</html>

<script src="https://unpkg.com/vue@3" type="application/javascript"></script>
<script src="https://cdn.ethers.io/lib/ethers-5.6.8.umd.min.js" type="application/javascript"></script>
<script src="main.js" type="module"></script>